# 1월 11일 TIL 🔥

# 같은 아이디로 로그인했을 때 경고 메세지 띄우기 (Feat. React)

저번에 로그인 기능을 만들었는데 같은 아이디로 들어가면 401오류가 뜨길래 에러처리를 해놓겠습니다.

## 로그인 함수



![](https://images.velog.io/images/originxh/post/cdf6d3ef-502b-4ae3-a279-277c27496a2f/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-11%2017.00.12.png)

로그인 함수 안에 일부분 입니다. 일부분이라기엔 가장 중요한 부분이죠ㅎ.

로그인URL에 post요청해서 성공하면 응답온 데이터를 `useState()`와 `localStorage`에 등록합니다. 오브젝트를 바로 로컬스토리지에 넣으면 안되니 JSON으로 변환시켜서 넣어줘야 합니다.

## 조건문 추가



![](https://images.velog.io/images/originxh/post/ebc28e20-7986-45d6-8470-36f6f2c7f003/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-11%2017.00.37.png)

위 로그인함수에서 axios요청하기 전에 이런 조건문을 추가해줍니다.

로컬스토리지에 한 줄(?)이라도 있으면 거기에 있는 이메일과 사용자가 입력한 이메일을 비교하고 일치하면 경고창을 띄우게 설정했습니다. 아니면(else) axios를 그대로 진행하게 만들었습니다.

## 결과



![](https://images.velog.io/images/originxh/post/c2c1fcee-db46-4731-ac55-1641c8e3a38b/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-11%2017.24.34.png)

잘됩니다😊

## 로그아웃시 로컬스토리지



![](https://images.velog.io/images/originxh/post/317e8700-bb12-40b4-a8cd-889255416f29/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-11%2017.01.09.png)

로그아웃할 때 로컬스토리지에 있는 정보를 삭제하는 API를 추가했습니다. 그래야 로그아웃을 하고 다시 로그인을 할 때 중복에 걸리지 않기 때문입니다.

## 후기



 제 컴퓨터에선 잘 작동하지만 다른 컴퓨터에서 로그인을 시도했을 때 어떻게 되는지는 아직 테스트하지 않아서 임시방편으로 만들었습니다..ㅎ 그리고 로그아웃할 때 로컬스토리지를 모두 삭제하는 모듈이라서 아마 부분삭제로 변경해야 하지 않을까 싶습니다.