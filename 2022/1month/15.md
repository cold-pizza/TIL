# 1월 15일 TIL 🔥

# 비 로그인시 다른 URL접근 제한하기 (Feat. React)



 채팅할 수 있는 웹을 만들었는데 로그인 없이 URL을 수정해봤더니 그냥 들어가집니다..ㅜ

![](https://images.velog.io/images/originxh/post/4217343b-05c6-45e3-b4c3-af8a625c2d46/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%2015.14.26.png)

사진을 보시면 기존사이트에 `/freinds`를 더 입력하면 라우터가 그냥 넘어갑니다.

보안을 위해 코드를 수정해 줍니다!

## location을 이용하여 URL제한하기

---

![](https://images.velog.io/images/originxh/post/5905bac6-fbe9-47a5-80e1-15faa0560bff/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202022-01-15%2015.13.44.png)

useEffect안에 비 로그인상태에 로그인하는 URL말고 다른 곳을 접근하면 alert창을 띄우고 다시 돌아오게 만들었습니다. 

 로그인하고 로그아웃할 때 로컬스토리지에 있던 정보를 삭제하기 만들어서 비 로그인 상태면 로컬스토리지에 정보가 없을 겁니다. 그래서 `localStorage.length === 0`이란 조건을 이용하여 비 로그인 상태를 잡았고 옆에는 ***로그인하는 사이트가 아니라면~*** 이라는 조건을 하나 더 붙였습니다. 생각보다 간단하게 만들었습니다. 

## 후기

---

 아직 사이트배포를 안해서 호스트 변수 부분을 그냥 둬도 상관없겠지만 배포하기를 대비해서 부분수정을 다시 진행해야 할 것 같습니다.    
 그리고 회원가입 하는 라우터도 설정하지 않았는데 알아서 들어가져서 그 부분도 다시 봐야하겠습니다.

---
 틀린 부분이 있거나 더 나은 방법이 있다면 피드백 주시면 감사하겠습니다 :)